{
  "users": [
    {
      "id": "1",
      "username": "admin",
      "password": "admin123",
      "role": "Admin"
    },
    {
      "id": "2",
      "username": "user",
      "password": "user123",
      "role": "User"
    },
    {
      "id": "80af",
      "username": "venugopal.01",
      "password": "Venugopal@123",
      "role": "user"
    },
    {
      "id": "662e",
      "username": "grows",
      "password": "grows",
      "role": "user"
    }
  ],
  "posts": [
    {
      "id": "1",
      "title": "First Post",
      "content": "Hello World!"
    }
  ],
  "registeredDonars": [
    {
      "id": "01c5",
      "firstName": "VENUGOPAL V",
      "lastName": "V",
      "email": "venugopal.112055@sxcce.edu.in",
      "phone": "09080368568",
      "dob": "1999-01-01",
      "gender": "male",
      "donationCategory": "Blood",
      "bloodType": "A-",
      "lastDonation": "",
      "healthStatus": "excellent",
      "weight": "90",
      "medicalHistory": "<template>\n  <div>\n    <div class=\"modal-overlay\" :class=\"{ active: showModal }\" @click.self=\"closeModal\">\n      <div class=\"registration-modal\">\n        <div class=\"modal-header\">\n          <h2>{{ message }}</h2>\n          <button class=\"close-modal\" @click=\"closeModal\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n\n        <div class=\"modal-body\">\n          <p v-if=\"errors\" class=\"error-message\">{{ errors }}</p>\n           \n          <!-- Step 1: Personal Information -->\n          <div class=\"form-step\" v-show=\"currentStep === 1\">\n            <h3 class=\"form-title\">Personal Information</h3>\n            \n            <div class=\"form-grid\">\n              <div class=\"form-group required\">\n                <label for=\"firstName\">First Name</label>\n                <input type=\"text\" id=\"firstName\" v-model=\"form.firstName\" placeholder=\"Enter your first name\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"lastName\">Last Name</label>\n                <input type=\"text\" id=\"lastName\" v-model=\"form.lastName\" placeholder=\"Enter your last name\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"email\">Email Address</label>\n                <input type=\"email\" id=\"email\" v-model=\"form.email\" placeholder=\"Enter your email\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"phone\">Phone Number</label>\n                <input type=\"tel\" id=\"phone\" v-model=\"form.phone\" placeholder=\"Enter your phone number\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"dob\">Date of Birth</label>\n                <input type=\"date\" id=\"dob\" v-model=\"form.dob\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"gender\">Gender</label>\n                <select id=\"gender\" v-model=\"form.gender\">\n                  <option value=\"\" disabled selected>Select gender</option>\n                  <option value=\"male\">Male</option>\n                  <option value=\"female\">Female</option>\n                  <option value=\"other\">Other</option>\n                  <option value=\"prefer-not-to-say\">Prefer not to say</option>\n                </select>\n              </div>\n            </div>\n\n            <div class=\"form-navigation\">\n              <div></div>\n              <button class=\"btn-next\" @click=\"nextStep(1)\">Next</button>\n            </div>\n          </div>\n\n          <!-- Step 2: Medical & Donation Information -->\n          <div class=\"form-step\" v-show=\"currentStep === 2\">\n            <h3 class=\"form-title\">Medical & Donation Information</h3>\n            \n            <div class=\"form-group required\">\n              <label for=\"donationCategory\">Donation Category</label>\n              <select id=\"donationCategory\" v-model=\"form.donationCategory\" @change=\"handleCategoryChange\">\n                <option value=\"\" disabled>Select category</option>\n                <option value=\"Blood\">Blood</option>\n                <option value=\"Organ\">Organ</option>\n                <option value=\"Other\">Other</option>\n              </select>\n            </div>\n\n            <!-- Dynamic fields based on category -->\n            <div v-if=\"form.donationCategory\" class=\"form-grid\">\n              <!-- Blood Type/Organ Name/Other Donation Type -->\n              <div class=\"form-group required\">\n                <label v-if=\"form.donationCategory === 'Blood'\">Blood Type</label>\n                <label v-else-if=\"form.donationCategory === 'Organ'\">Organ Name</label>\n                <label v-else>Donation Type</label>\n                \n                <select v-if=\"form.donationCategory === 'Blood'\" v-model=\"form.bloodType\">\n                  <option value=\"\" disabled>Select blood type</option>\n                  <option value=\"A+\">A+</option>\n                  <option value=\"A-\">A-</option>\n                  <option value=\"B+\">B+</option>\n                  <option value=\"B-\">B-</option>\n                  <option value=\"O+\">O+</option>\n                  <option value=\"O-\">O-</option>\n                  <option value=\"AB+\">AB+</option>\n                  <option value=\"AB-\">AB-</option>\n                  <option value=\"unknown\">I don't know</option>\n                </select>\n                \n                <select v-else-if=\"form.donationCategory === 'Organ'\" v-model=\"form.bloodType\">\n                  <option value=\"\" disabled>Select organ</option>\n                  <option value=\"Heart\">Heart</option>\n                  <option value=\"Liver\">Liver</option>\n                  <option value=\"Kidney\">Kidney</option>\n                  <option value=\"Lung\">Lung</option>\n                  <option value=\"I don't know\">I don't know</option>\n                </select>\n                \n                <input v-else type=\"text\" v-model=\"form.bloodType\" placeholder=\"Enter donation type\">\n              </div>\n              \n              <div class=\"form-group\">\n                <label for=\"lastDonation\">Last Donation Date (Optional)</label>\n                <input type=\"date\" id=\"lastDonation\" v-model=\"form.lastDonation\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"healthStatus\">Health Status</label>\n                <select id=\"healthStatus\" v-model=\"form.healthStatus\">\n                  <option value=\"\" disabled>Select health status</option>\n                  <option value=\"excellent\">Excellent</option>\n                  <option value=\"good\">Good</option>\n                  <option value=\"fair\">Fair</option>\n                  <option value=\"recent-illness\">Recently recovered</option>\n                </select>\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"weight\">Weight (kg)</label>\n                <input type=\"number\" id=\"weight\" v-model=\"form.weight\" min=\"45\" placeholder=\"Minimum 45 kg\">\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"medicalHistory\">Medical History (Optional)</label>\n              <textarea id=\"medicalHistory\" rows=\"3\" v-model=\"form.medicalHistory\" \n                placeholder=\"Any medical conditions, surgeries, or allergies\"></textarea>\n            </div>\n\n            <div class=\"form-navigation\">\n              <button class=\"btn-prev\" @click=\"prevStep()\">\n                <i class=\"fas fa-arrow-left\"></i> Previous\n              </button>\n              <button class=\"btn-next\" @click=\"nextStep(2)\">Next <i class=\"fas fa-arrow-right\"></i></button>\n            </div>\n          </div>\n\n          <!-- Step 3: Location & Preferences -->\n          <div class=\"form-step\" v-show=\"currentStep === 3\">\n            <h3 class=\"form-title\">Location & Preferences</h3>\n            \n            <div class=\"form-grid\">\n              <div class=\"form-group required\">\n                <label for=\"city\">City</label>\n                <input type=\"text\" id=\"city\" v-model=\"form.city\" placeholder=\"Enter your city\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"state\">State/Province</label>\n                <input type=\"text\" id=\"state\" v-model=\"form.state\" placeholder=\"Enter state/province\">\n              </div>\n              \n              <div class=\"form-group required\">\n                <label for=\"country\">Country</label>\n                <input type=\"text\" id=\"country\" v-model=\"form.country\" placeholder=\"Enter your country\">\n              </div>\n              \n              <div class=\"form-group\">\n                <label for=\"postalCode\">Postal Code</label>\n                <input type=\"text\" id=\"postalCode\" v-model=\"form.postalCode\" placeholder=\"Enter postal code\">\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"preferredCenter\">Preferred Donation Center (Optional)</label>\n              <select id=\"preferredCenter\" v-model=\"form.preferredCenter\">\n                <option value=\"\" selected>Select preferred center</option>\n                <option value=\"central\">Central Blood Bank</option>\n                <option value=\"north\">North City Hospital</option>\n                <option value=\"south\">South Medical Center</option>\n                <option value=\"east\">East Community Clinic</option>\n                <option value=\"west\">West General Hospital</option>\n              </select>\n            </div>\n\n            <input type=\"hidden\" v-model=\"form.donationStatus\">\n            \n            <div class=\"form-navigation\">\n              <button class=\"btn-prev\" @click=\"prevStep()\">\n                <i class=\"fas fa-arrow-left\"></i> Previous\n              </button>\n              <button class=\"btn-submit\" @click=\"nextStep(3)\">Submit Registration</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { registerDonar } from '@/services/auth';    \nimport api from '@/services/api';\n\nexport default {\n  name: 'RegistrationForm',\n  props: {\n    message: String,\n  },\n  data() {\n    return {\n      showModal: false,\n      currentStep: 1,\n      form: {\n        firstName: '',\n        lastName: '',\n        email: '',\n        phone: '',\n        dob: '',\n        gender: '',\n        donationCategory: '',\n        bloodType: '',\n        lastDonation: '',\n        healthStatus: '',\n        weight: null,\n        medicalHistory: '',\n        city: '',\n        state: '',\n        country: '',\n        postalCode: '',\n        preferredCenter: '',\n        donationStatus: 'pending'\n      },\n      errors: ''\n    }\n  },\n  mounted() {\n    if (this.$bus && this.$bus.$on) {\n      this.$bus.$on('open-registration', this.openModal);\n    } else if (this.$root && this.$root.$on) {\n      this.$root.$on('open-registration', this.openModal);\n    }\n  },\n  beforeDestroy() {\n    if (this.$bus && this.$bus.$off) {\n      this.$bus.$off('open-registration', this.openModal);\n    } else if (this.$root && this.$root.$off) {\n      this.$root.$off('open-registration', this.openModal);\n    }\n  },\n  methods: {\n    openModal(donor) {\n      this.errors = '';\n      this.currentStep = 1;\n      \n      if (donor) {\n        Object.assign(this.form, {\n          id: donor.id,\n          firstName: donor.firstName || '',\n          lastName: donor.lastName || '',\n          email: donor.email || '',\n          phone: donor.phone || '',\n          dob: donor.dob || '',\n          gender: donor.gender || '',\n          bloodType: donor.bloodType || '',\n          lastDonation: donor.lastDonation || '',\n          healthStatus: donor.healthStatus || '',\n          weight: donor.weight || null,\n          medicalHistory: donor.medicalHistory || '',\n          city: donor.city || '',\n          state: donor.state || '',\n          country: donor.country || '',\n          postalCode: donor.postalCode || '',\n          preferredCenter: donor.preferredCenter || '',\n          donationStatus: donor.donationStatus || 'pending',\n          donationCategory: donor.donationCategory || '',\n          \n        });\n      } else {\n        this.resetForm();\n      }\n      \n      this.showModal = true;\n    },\n    closeModal() {\n      this.showModal = false;\n    },\n    handleCategoryChange() {\n      this.form.bloodType = '';\n    },\n    async nextStep(step) {\n      const valid = await this.validateStep(step);\n      if (valid) {\n        if (step === 3) {\n          await this.submitForm();\n        } else {\n          this.currentStep++;\n        }\n      }\n    },\n    prevStep() {\n      if (this.currentStep > 1) {\n        this.currentStep--;\n        this.errors = '';\n      }\n    },\n    async validateStep(step) {\n      this.errors = '';\n\n      if (step === 1) {\n        if (!this.form.firstName) { this.errors = 'First name is required'; return false; }\n        if (!this.form.lastName) { this.errors = 'Last name is required'; return false; }\n        if (!this.form.email) { this.errors = 'Email is required'; return false; }\n        if (!this.form.phone) { this.errors = 'Phone is required'; return false; }\n        if (!this.form.dob) { this.errors = 'Date of Birth is required'; return false; }\n        const age = this.calculateAge(this.form.dob);\n        if (age < 18) { this.errors = 'Minimum age is 18'; return false; }\n        if (!this.form.gender) { this.errors = 'Gender is required'; return false; }\n      }\n\n      if (step === 2) {\n        if (!this.form.donationCategory) { this.errors = 'Donation category is required'; return false; }\n        if (!this.form.bloodType) { \n          this.errors = this.form.donationCategory === 'Other' \n            ? 'Donation type is required' \n            : `${this.form.donationCategory === 'Blood' ? 'Blood type' : 'Organ name'} is required`; \n          return false; \n        }\n        if (!this.form.healthStatus) { this.errors = 'Health status is required'; return false; }\n        if (!this.form.weight) { this.errors = 'Weight is required'; return false; }\n        if (this.form.weight < 45) { this.errors = 'Minimum weight is 45 kg'; return false; }\n      }\n\n      if (step === 3) {\n        if (!this.form.city) { this.errors = 'City is required'; return false; }\n        if (!this.form.state) { this.errors = 'State is required'; return false; }\n        if (!this.form.country) { this.errors = 'Country is required'; return false; }\n      }\n      \n      return true;\n    },\n    async submitForm() {\n      try {\n        if (this.form.id) {\n          await api.put(`/registeredDonars/${this.form.id}`, { ...this.form });\n        } else {\n          await registerDonar(this.form);\n        }\n        \n        if (this.$bus && this.$bus.$emit) {\n          this.$bus.$emit('donor-saved');\n        } else if (this.$root && this.$root.$emit) {\n          this.$root.$emit('donor-saved');\n        }\n        \n        this.closeModal();\n        this.resetForm();\n      } catch (error) {\n        this.errors = error.message || 'Save failed';\n      }\n    },\n    calculateAge(dob) {\n      const birthDate = new Date(dob);\n      const diff = Date.now() - birthDate.getTime();\n      const ageDate = new Date(diff);\n      return Math.abs(ageDate.getUTCFullYear() - 1970);\n    },\n    resetForm() {\n      this.form = {\n        firstName: '',\n        lastName: '',\n        email: '',\n        phone: '',\n        dob: '',\n        gender: '',\n        donationCategory: '',\n        bloodType: '',\n        lastDonation: '',\n        healthStatus: '',\n        weight: null,\n        medicalHistory: '',\n        city: '',\n        state: '',\n        country: '',\n        postalCode: '',\n        preferredCenter: '',\n        donationStatus: 'pending'\n      };\n      this.currentStep = 1;\n      this.errors = '';\n    }\n  }\n}\n</script>",
      "city": "Chennai",
      "state": "TAMIL NADU",
      "country": "India",
      "postalCode": "600097",
      "preferredCenter": "central",
      "donationStatus": "pending"
    }
  ],
  "stockInventory": [
    {
      "id": "4a3d",
      "inventoryType": "blood",
      "itemType": "A+",
      "quantity": 12,
      "createdAt": "2026-02-05T10:48:42.791Z"
    }
  ]
}